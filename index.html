<html lang="en">
 <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Short Link Generator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
  </style>
 </head>
 <body class="bg-gray-100 flex items-center justify-center min-h-screen">
  <main class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
   <form id="shorten-form" class="space-y-4">
    <label for="long-url" class="block text-gray-700 font-bold">
      Enter Long URL:
    </label>
    <input
      type="text"
      id="long-url"
      class="border rounded w-full p-2"
      placeholder="https://example.com"
      required
    />

    <label for="service" class="block text-gray-700 font-bold">
      Select Service:
    </label>
    <select id="service" class="border rounded w-full p-2" required>
      <option value="tinyurl">TinyURL</option>
      <option value="bitly">Bitly</option>
      <option value="cuttly">Cutt.ly</option>
      <option value="vgd">v.gd</option>
    </select>

    <button type="submit" class="bg-blue-500 text-white w-full py-2 rounded">
      Generate Short Link
    </button>
   </form>

   <div id="result" class="hidden mt-4">
    <p class="text-gray-700">Short URL:</p>
    <p id="short-url" class="text-blue-500"></p>
   </div>
  </main>
  <script type="module">
    import { shortenWithTinyURL } from "./app.js";
    import { shortenWithBitly } from "./bitly.js";
    import { shortenWithCuttly } from "./cuttly.js";
    import { shortenWithVgd } from "./vgd.js";

    const form = document.getElementById("shorten-form");
    const resultDiv = document.getElementById("result");
    const shortUrlDisplay = document.getElementById("short-url");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const longUrl = document.getElementById("long-url").value.trim();
      const service = document.getElementById("service").value;

      try {
        let shortUrl;
        if (service === "tinyurl") {
          shortUrl = await shortenWithTinyURL(longUrl);
        } else if (service === "bitly") {
          shortUrl = await shortenWithBitly(longUrl);
        } else if (service === "cuttly") {
          shortUrl = await shortenWithCuttly(longUrl);
        } else if (service === "vgd") {
          shortUrl = await shortenWithVgd(longUrl);
        }

        shortUrlDisplay.innerHTML = `<a href="${shortUrl}" target="_blank">${shortUrl}</a>`;
        resultDiv.classList.remove("hidden");
      } catch (error) {
        alert(error.message);
      }
    });
  </script>
 </body>
</html>
